<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="fonts.css">
    <link rel="stylesheet" href="style.css">
    <title>Weather</title>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-wrapper flex">
                <div class="header-left-side flex">
                    <div class="cloud-wrapper">
                        <a href="">
                            <img src="./photos/PartlyCloudy.png" alt="Cloud">
                        </a>
                    </div>
                    <h1>Weather By Vicbox</h1>
                </div>
                <div class="header-right-side">
                    <nav>
                        <ul class="flex">
                            <li>
                                <a href="#">
                                    Github
                                </a>
                            </li>
                            <li class="about">
                                <a href="#">
                                   About 
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <section>
            <div class="middle-wrapper">
                <div class="weather-box" id="weatherBox">
                    
                </div>
                <div class="weather-box-empty">

                </div>
            </div>
        </section>
    </div>
    <script>
        const weatherBox = document.getElementById('weatherBox')
        const getWeather = async () => {
            try {
                const lat = 41.643414;
                const lon = 41.639900;
                const key = 'cddd5a4f4e270cdba18687f3b46a5766'
                const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${key}`)
                const data = await response.json()

                if (response.status === 401) {
                    const errorText = document.createElement('p')
                    errorText.textContent = response.statusText
                    weatherBox.appendChild(errorText)
                } else {

                    const topContent = document.createElement('div')
                    const cloud = document.createElement('p')
                    const cloudWrapper = document.createElement('div')
                    const celsiusWrapper = document.createElement('div')
                    const country = document.createElement('h2')
                    const h1 = document.createElement('h1')

                    h1.textContent = Math.round(data.main.temp - 273.15)
                    cloud.textContent = data.weather[0].main
                    country.textContent = `${data.name}, ${data.sys.country}`


                    h1.classList.add('title')
                    topContent.classList.add('box-top-content')
                    cloudWrapper.classList.add('box-cloud-wrapper')
                    celsiusWrapper.classList.add('celsius-wrapper')

                    const img = document.createElement('img')
                    img.setAttribute('src', `http://openweathermap.org/img/w/${data.weather[0].icon}.png`)
                    img.classList.add('weather-icon')

                    weatherBox.appendChild(topContent)
                    cloudWrapper.appendChild(img)
                    topContent.appendChild(cloudWrapper)
                    topContent.appendChild(country)
                    weatherBox.appendChild(celsiusWrapper)
                    celsiusWrapper.appendChild(h1)
                    celsiusWrapper.appendChild(cloud)
                }


            }
            catch (e) {
                console.log(e)
            }


            }
            getWeather()
    </script>
</body>
</html>